before_script:
- apt-get update
- wget --no-verbose https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- apt-get install -y ./google-chrome-stable_current_amd64.deb
- apt-get install -y iceweasel
- wget --no-verbose https://chromedriver.storage.googleapis.com/106.0.5249.61/chromedriver_linux64.zip
- unzip chromedriver_linux64.zip
- install chromedriver /usr/local/bin
- wget --no-verbose https://github.com/mozilla/geckodriver/releases/download/v0.31.0/geckodriver-v0.31.0-linux32.tar.gz -O geckodriver-linux64.tar.gz
- tar -xf geckodriver-linux64.tar.gz
- install geckodriver /usr/local/bin

node:16:
  image: node:16
  script:
  - PARALLEL_BUILD=false PARALLEL_E2E=false E2E_LAUNCH_DELAY=5 EXPLICIT_WAIT_TIMEOUT=20000 TEST_TIMEOUT=60000 DOCKER=true npm test

node:18:
  image: node:18
  script:
  - PARALLEL_BUILD=false PARALLEL_E2E=false E2E_LAUNCH_DELAY=5 EXPLICIT_WAIT_TIMEOUT=20000 TEST_TIMEOUT=60000 DOCKER=true npm test

cache:
  paths:
  - src/backend/node_modules
  - src/frontend/node_modules
  - src/e2e/node_modules
  - build/node_modules
